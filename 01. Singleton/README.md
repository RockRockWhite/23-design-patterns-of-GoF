# 单例模式

这里小记一下

对于Java(应该是对于JVM的语言可能)

在实现了DCL的懒汉模式之后, 虽然看似能保证线程安全, 但是在极端情况下, 由于Java的创建对象操作并不是原子性的 

![image-20220216120247273](https://typora-1303830133.cos.ap-shanghai.myqcloud.com/typora/img/image-20220216120247273.png)

若发生指令重排, 则可能发生, 虽然指向的空间不为null了, 但是对象还没有完成初始化, 获得的instance是并未完成初始化的对象的问题

因此此处应该避免构造器的指令重排



对于其他哪些语言也存在这个问题, 待研究...